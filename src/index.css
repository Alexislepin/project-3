@tailwind base;
@tailwind components;
@tailwind utilities;

/* Lexu Brand Typography */
/* Using Inter ExtraBold (800) as the brand font */
/* Future: Replace with custom brand font (Söhne, General Sans, Geist, etc.) */
/* The brand name is ALWAYS displayed as "LEXU." (uppercase with period) via BrandLogo component */

@layer base {
  :root {
    --sat: env(safe-area-inset-top, 0px);
    --sar: env(safe-area-inset-right, 0px);
    --sab: env(safe-area-inset-bottom, 0px);
    --sal: env(safe-area-inset-left, 0px);
    --header-height: 56px;
    /* Hauteur de la tabbar (avec labels) */
    --tabbar-h: 72px;
    /* Thème clair (par défaut) - valeurs RGB (space-separated) */
    --color-accent: 230 255 0; /* Jaune brand - NE PAS CHANGER */
    --color-on-accent: 0 0 0;
    --color-bg: 245 245 245;
    --color-surface: 255 255 255;
    --color-surface-2: 249 249 249;
    --color-border: 229 231 235;
    --color-text: 5 5 5;
    --color-muted: 64 64 64;
    --color-muted-2: 113 113 122;
    --color-overlay: 0 0 0;
    --library-content-pt: 0px;
  }
  
  .theme-dark {
    --color-accent: 230 255 0; /* on garde EXACTEMENT le même jaune */
    --color-on-accent: 0 0 0;
    --color-bg: 15 15 16;          /* #0F0F10 */
    --color-surface: 22 22 24;     /* #161618 */
    --color-surface-2: 28 28 31;   /* #1C1C1F */
    --color-border: 38 38 42;      /* #26262A */
    --color-text: 245 245 247;     /* #F5F5F7 */
    --color-muted: 161 161 170;    /* #A1A1AA */
    --color-muted-2: 113 113 122;  /* #71717A */
    --color-overlay: 0 0 0;
    --library-content-pt: 10px;
    color-scheme: dark;
  }
  
  html {
    height: 100%;
    overflow: hidden;
    overscroll-behavior: none;
  }
  
  body {
    height: 100%;
    overflow: hidden;
    overscroll-behavior: none;
    font-family: Inter, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    @apply bg-background-light text-text-main-light antialiased;
    /* Safe area padding only on sides, NOT top/bottom (handled by components) */
    padding-left: var(--sal);
    padding-right: var(--sar);
    /* Désactiver zoom double-tap et pinch */
    touch-action: manipulation;
    -webkit-text-size-adjust: 100%;
    -webkit-tap-highlight-color: transparent;
  }
  
  /* Désactiver zoom sur tous les éléments interactifs */
  button, a, input, textarea, select {
    touch-action: manipulation;
  }
  
  /* Empêcher le zoom sur double-tap */
  * {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    user-select: none;
  }
  
  /* Exception: permettre sélection de texte dans inputs/textarea */
  input, textarea {
    -webkit-user-select: text;
    user-select: text;
  }
  
  #root {
    height: 100%;
    overflow: hidden;
    overscroll-behavior: none;
    /* Safe area padding only on sides, NOT top/bottom (handled by components) */
    padding-left: var(--sal);
    padding-right: var(--sar);
  }
}

/* Theme-specific tweaks */
.theme-dark .leaderboard-btn {
  color: rgba(0, 0, 0, 1);
}
.theme-dark .leaderboard-btn svg {
  color: rgba(0, 0, 0, 1);
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translate(-50%, 10px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translate(-50%, 0) scale(1);
  }
}

@keyframes slideDown {
  from {
    opacity: 1;
    transform: translate(-50%, 0) scale(1);
  }
  to {
    opacity: 0;
    transform: translate(-50%, 10px) scale(0.95);
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

@keyframes glow {
  0%, 100% {
    box-shadow: 0 0 20px rgba(251, 191, 36, 0.15);
  }
  50% {
    box-shadow: 0 0 30px rgba(251, 191, 36, 0.25);
  }
}

@layer utilities {
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
    width: 0;
    height: 0;
  }
  
  /* Classe no-scrollbar pour masquer les scrollbars partout */
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .no-scrollbar::-webkit-scrollbar {
    display: none;
    width: 0;
    height: 0;
  }
  
  /* Safe Area for iOS notch/Dynamic Island */
  .safe-area-top {
    padding-top: max(12px, env(safe-area-inset-top));
  }
  .safe-area-bottom {
    padding-bottom: max(16px, env(safe-area-inset-bottom));
  }
  
  /* Safe top avec padding minimal */
  .safe-top {
    padding-top: max(12px, var(--sat));
  }
  
  /* Safe bottom avec padding minimal */
  .safe-bottom {
    padding-bottom: max(16px, var(--sab));
  }
  
  /* Classe utilitaire: contenu safe (tabbar + safe-area + marge) */
  .safe-bottom-content {
    padding-bottom: calc(var(--tabbar-h) + var(--sab) + 12px);
  }
  
  /* Sticky header avec safe-area intégrée */
  .sticky-header {
    position: sticky;
    top: 0;
    z-index: 50;
    background-color: rgba(var(--color-surface), 0.95);
    backdrop-filter: blur(8px);
    border-bottom: 1px solid rgb(var(--color-border));
  }

  /* Texte par défaut sur le jaune accent */
  .bg-primary, .bg-primary\/100 {
    color: rgb(var(--color-on-accent)) !important;
  }
  .text-on-accent {
    color: rgb(var(--color-on-accent));
  }
}

/* Améliorer le rendu des images de couvertures de livres */
img[alt*="book"],
img[alt*="Book"],
.book-cover img {
  image-rendering: -webkit-optimize-contrast;
  image-rendering: crisp-edges;
  -webkit-backface-visibility: hidden;
  -moz-backface-visibility: hidden;
  -webkit-transform: translateZ(0);
  -moz-transform: translateZ(0);
  transform: translateZ(0);
}
